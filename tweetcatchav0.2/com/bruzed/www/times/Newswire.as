package com.bruzed.www.times {		import flash.display.MovieClip;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.events.Event;	import flash.display.MovieClip;	import flash.events.IOErrorEvent;		public class Newswire extends MovieClip {		public static const LOADED	:String = "xmlIsLoaded";				//variables for the xml		private var _xml:XML;		private var _offsetAmount:Number = 20;		private var url:String;		private var _xmlLoadCounter:uint;		private var loader:URLLoader = new URLLoader();		private var _xmlLoadedStatus:Boolean = false;		//load up the data		private var _headlines:Array = new Array();		private var _urls:Array = new Array();		private var _sections:Array = new Array();		private var _summary:Array = new Array();		private var _updatedTime:Array = new Array();		private var _createdTime:Array = new Array();		private var _pubDate:Array = new Array();						//constructor		public function Newswire(APIKEY:String) {			url = "http://api.nytimes.com/svc/news/v2/all/last24hours.xml?offset=20&api-key=" + APIKEY;					}				public function load():void {			loader.load(new URLRequest(url));			loader.addEventListener(Event.COMPLETE, _onXMLLoaded, false, 0, true);			loader.addEventListener(IOErrorEvent.IO_ERROR, _onIOErrorEvent, false, 0, true);		}				//xml loaded		public function _onXMLLoaded($e:Event):void {			_xml = new XML($e.target.data);			//trace(_xml);			parseXML();			$e.target.removeEventListener(Event.COMPLETE, _onXMLLoaded);		}				//on IO error		public function _onIOErrorEvent($e:IOErrorEvent):void {			trace("loaded");			_xml = new XML($e.target.data);			//trace(_xml);			parseXML();			$e.target.removeEventListener(Event.COMPLETE, _onIOErrorEvent);		}				//parse xml		public function parseXML() {					//trace(_xml.results.news_item.headline);			var headlineList:XMLList = _xml.results.news_item.headline;			for each (var tempXML:XML in headlineList) {                _headlines.push(tempXML);            }			//load up the url's			var urlList:XMLList = _xml.results.news_item.@url;			for each (var urlXML:XML in urlList) {                _urls.push(urlXML);            }			//load up sections			var sectionList:XMLList = _xml.results.news_item.section;			for each (var sectionXML:XML in sectionList) {                _sections.push(sectionXML);            }						//load up updated time			var updatedTimeList:XMLList = _xml.results.news_item.updated;			for each (var updatedTimeXML:XML in updatedTimeList) {                _updatedTime.push(updatedTimeXML);            }						//load up created time			var createdTimeList:XMLList = _xml.results.news_item.created;			for each (var createdTimeXML:XML in createdTimeList) {                _createdTime.push(createdTimeXML);            }						//load up published date			var pubDateList:XMLList = _xml.results.news_item.pubdate;			for each (var pubDateXML:XML in pubDateList) {                _pubDate.push(pubDateXML);            }						//dispatch the event			dispatchEvent( new Event(LOADED) );		}				//getters		//get the headlines		public function get getHeadlines():Array {			return _headlines;		}				//get the urls		public function get getUrls():Array {			return _urls;		}				//get the sections		public function get getSections():Array {			return _sections;		}				//get the summary		public function get getSummary():Array {			return _summary;		}				//get the updated time		public function get getUpdatedTime():Array {			return _updatedTime;		}				//get the created time		public function get getCreatedTime():Array {			return _createdTime;		}				//get the pubdate		public function get getPubDate():Array {			return _pubDate;		}			}}